"use strict";(self.webpackChunkpayment_split=self.webpackChunkpayment_split||[]).push([[949],{949:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r=t(8214),i=t(5861),s=t(885),a=t(7313),o=t(6157),l=t(2517),c=t(1235),d=t(5448),u=t(8104),f=t(4002),h=t(7597),x=t(40),p=t(2669),m=t(5672),g=t(8698),Z=t(2937),j=t(2415),b=t(4577),v=t(5814),w=function(){var e=a.useState(),n=(0,s.Z)(e,2),t=n[0],r=n[1],i=a.useState(),o=(0,s.Z)(i,2),l=o[0],c=o[1],d=(0,v.N)(),u=d.getPayments,f=d.txns;return a.useEffect((function(){var e=u(),n=e.getPayments();r(e.getTotal()),c(n)}),[u]),[t,l,f]},C=t(1905),y=t.n(C),k=function(){var e=a.useState(),n=(0,s.Z)(e,2),t=n[0],r=n[1],i=a.useState(),o=(0,s.Z)(i,2),l=o[0],c=o[1];return[t,a.useCallback((function(e){return y()(e).then((function(e){var n=document.createElement("canvas"),t=n.getContext("2d"),i=e.width,s=e.height;n.width=i,n.height=s,t.drawImage(e,0,0);var a=n.toDataURL("image/png",1);return r(a),!0})).catch((function(e){c(e)})),!0}),[]),l]},S=t(6417),P=(0,b.Z)(j.Z)((function(){return{borderRadius:0,padding:"0.475rem",width:"24rem",maxWidth:"100%"}})),E=(0,b.Z)(m.Z)((function(){return{"& > li":{paddingLeft:0,paddingRight:0,fontSize:"small"},marginBottom:"0.875rem"}})),I=a.memo((function(e){var n=e.setImageUrl,t=a.useRef(null),r=k(),i=(0,s.Z)(r,2),o=i[0],l=i[1],c=w(),d=(0,s.Z)(c,3),u=d[0],f=d[1],h=d[2],x=(0,v.N)().toPrice;return a.useEffect((function(){t.current&&null!==f&&void 0!==f&&f.length&&l(t.current)}),[l,f]),a.useEffect((function(){o&&""!==o&&n(o)}),[o,n]),(0,S.jsxs)(P,{ref:t,children:[(0,S.jsx)(p.Z,{borderBottom:1,fontWeight:"bold",borderColor:"text.disabled",children:"Expenses"}),(0,S.jsxs)(E,{dense:!0,children:[h.map((function(e){return(0,S.jsx)(g.ZP,{children:(0,S.jsxs)(Z.ZP,{container:!0,justifyContent:"space-between",children:[(0,S.jsxs)("span",{children:[e.friend.name," paid:"]})," ",x(e.amount)]})},e.id)})),(0,S.jsxs)(p.Z,{textAlign:"right",width:"100%",fontSize:"small",children:["Total: ",x(null!==u&&void 0!==u?u:0)]})]}),(0,S.jsx)(p.Z,{borderBottom:1,fontWeight:"bold",borderColor:"text.disabled",children:"Final Txns"}),(0,S.jsx)(E,{dense:!0,children:f&&f.map((function(e){return(0,S.jsx)(g.ZP,{children:(0,S.jsxs)(Z.ZP,{container:!0,justifyContent:"space-between",children:[(0,S.jsxs)("span",{children:[e.from_friend.name," gives"," ",e.to_friend.name,":"]})," ",x(e.amount)]})},e.id)}))}),(0,S.jsx)(p.Z,{textAlign:"center",marginTop:"0.875rem",fontSize:"small",children:(0,S.jsx)("sub",{children:"\u2764\ufe0e swport.github.io/payment-split"})})]})})),B=t(9514),R={"& .MuiDialog-container":{alignItems:"flex-start"}},T=function(e){var n=e.isOpen,t=e.closeModal,p=a.useState(),m=(0,s.Z)(p,2),g=m[0],Z=m[1],j=a.useState(!1),b=(0,s.Z)(j,2),v=b[0],w=b[1];return(0,S.jsxs)(l.Z,{open:n,onClose:t,sx:R,scroll:"paper",children:[(0,S.jsx)(d.Z,{children:g&&(0,S.jsxs)(o.Z,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[(0,S.jsx)(u.Z,{onClick:function(e){e.preventDefault(),g&&(fetch(g).then(function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var t,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.blob();case 3:t=e.sent,i="final-txns-".concat((0,B.kb)(),".png"),(0,B.XC)(t,i),w(!1),e.next=15;break;case 9:return e.prev=9,e.t0=e.catch(0),console.log(e.t0),alert("Error occured while downloading image. Please refresh page and try again."),w(!1),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}()),w(!0))},disabled:v,children:(0,S.jsx)(f.Z,{})}),(0,S.jsx)(u.Z,{disabled:!0,children:(0,S.jsx)(h.Z,{})}),(0,S.jsx)(u.Z,{disabled:!0,children:(0,S.jsx)(x.Z,{})})]})}),(0,S.jsx)(c.Z,{dividers:!0,children:(0,S.jsx)(o.Z,{marginBottom:"12px",children:(0,S.jsx)(I,{setImageUrl:Z})})})]})}}}]);